- unless @act_files.empty?
  %table.legislation-files
    %caption Acts
    %thead
      %tr
        %th Name
        %th Text output
        %th Size
        %th Regenerate
    %tfoot
      %tr
        %th Name
        %th Text output
        %th Size
        %th Regenerate
    %tbody
      -@act_files.each do |file|
        %tr.legislation-file
          %td.name= link_to File.basename(file, ".xml"), "act?file=#{file}"
          %td.text &nbsp;
          %td.size= number_to_human_size(File.size(file))
          %td.regenerate &nbsp;
- unless @files_by_bill.empty?
  - @bill_names.each do |bill_name|
    - key = bill_name.blank? ? nil : bill_name
    - files_by_type = @files_by_bill[key].group_by{|x| x.file_type ? x.file_type : nil}
    %table.mif-files
      %caption= key ? bill_name : '(No bill named)'
      %thead
        %tr
          %th Name
          %th Text output
          %th Size
          %th Regenerate
      %tfoot
        %tr
          %th Name
          %th Text output
          %th Size
          %th Regenerate
      %tbody
        - files_by_type.keys.each do |file_type|
          %tr.mif-file-type
            %th.file-type{:colspan => 4 }= file_type.pluralize
          - files = files_by_type[file_type]
          - files.each do |file|
            %tr.mif-file
              %td.name= link_to file.name, "convert?file=#{file.path.gsub('&', '%26')}"
              %td.text= link_to "Text", "convert?file=#{file.path}&format=text"
              %td.size= number_to_human_size(File.size(file.path))    
              %td.regenerate
                - if file.haml_template_exists?
                  = link_to 'Regenerate', :contoller => "application", :action => "convert", :force => 'true', :file=>"#{file.path}", :method => 'get'
                - else
                  &nbsp;
- else
  %p No files available to parse
